<html>
<head>
	<title>ORAS Post Game Checklist</title>

	<!-- jQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css" />
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
	
	<!-- Bootstrap -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>

	<!-- Custom -->
	<link rel="stylesheet" href="css/fonts.css">
	<link rel="stylesheet" href="css/site.css">
	<link rel="stylesheet" href="css/oras_checklist.css">
	
	<script>
		$(function() {
			Render();
		});
		
		function GetJsonData(path)
		{
			var json = null;
			$.ajax({
				'async': false,
				'global': false,
				'url': path,
				'dataType': "json",
				'success': function(data) {
					json = data;
				}
			});
			
			return json;
		}
		
		function Render()
		{
			var oras = GetJsonData("data/oras_postgame_checklist.json");
		
			var col1 = $("#col1");
			var col2 = $("#col2");
			
			var chkIndex = 0;
			
			for(var t=0; t < oras.oras.length; t++)
			{
				chkIndex++;
				
				var task = oras.oras[t];
				var divTask = $("<div class='task'></div>")
				var targetCol = col1;
				
				if (task.col === 2)
				{
					targetCol = col2;					
				}
				
				//Build Task checkbox
				var chk = BuildCheckbox(chkIndex, task.task, task.formats);
				divTask.html(chk);				
				
				// Check for subtasks
				divTask = RenderSubTasks(divTask, chkIndex, task);
				
				targetCol.append(divTask);
			}
		}
		
		function RenderSubTasks(divTask, chkIndex, task)
		{
			if (task.subtasks !== undefined)
			{
				for(var t=0; t < task.subtasks.length; t++)
				{
					chkIndex++;
					
					var subtask = task.subtasks[t];
					divSubtask = $("<div class='subtask'></div>")
					
					if (subtask.subcol !== undefined)
					{
						divSubtask.class('subtaskcol');
					}
					
					//Build Task checkbox
					var chk = BuildCheckbox(chkIndex, subtask.task, subtask.formats);
					divSubtask.html(chk);
					divTask.append(divSubtask);
					
					// Check for subtasks
				}
			}
			
			return divTask;
		}
		
		function BuildCheckbox(chkIndex, text, formats)
		{
			var formattedText = text;
			if (formats !== undefined)
			{
				formattedText = FormatText(formattedText, formats);
			}
		
			var id = "chk" + chkIndex;
			var chk = $("<input type='checkbox' id='" + id + "' /><label for='" + id + "'>" + formattedText + "</label>");
			
			return chk;
		}
		
		function FormatText(text, formats)
		{
			if (formats !== undefined)
			{
				for(f = 0; f < formats.length; f++)
				{
					var all = formats[f].all;
					var word = formats[f].word;
					var format = formats[f].format;
					
					if (word !== undefined && word.length > 0)
					{
						text = text.replace(word,"<span class='" + format + "'>" + word + "</span>");
					}
					else if (all !== undefined && all.length > 0)
					{
						text = "<span class='" + all + "'>" + text + "</span>";
					}
				}
			}
			
			return text;
		}
	</script>
	
</head>
<body>
	<div class="postgame container">
		<div class="row">
			<div class="pageTitle col-md-12">
				Pokemon OR & AS - Post Game Checklist
			</div>
			<div class="credit col-md-12">
				Credit for this checklist goes to <a href="http://imgur.com/a/n4eq5">technophonix on imgur</a>.
			</div>
		</div>
		<div class="row">
			<div class="col-md-3">
				<img class="teamLogo-header teamMagma" alt="Team Magma" />
			</div>
			<div class="col-md-6">
				<div class="badge-header">
					<img class="badge-sm orasStoneBadge" alt="Stone Badge" />
					<img class="badge-sm orasKnuckleBadge" alt="Knuckle Badge" />
					<img class="badge-sm orasDynamoBadge" alt="Dynamo Badge" />
					<img class="badge-sm orasHeatBadge" alt="Heat Badge" />
					<img class="badge-sm orasBalanceBadge" alt="Balance Badge" />
					<img class="badge-sm orasFeatherBadge" alt="Feather Badge" />
					<img class="badge-sm orasMindBadge" alt="Mind Badge" />
					<img class="badge-sm orasRainBadge" alt="Rain Badge" />
				</div>
			</div>
			<div class="col-md-3">
				<img class="teamLogo-header teamAqua" alt="Team Aqua" />
			</div>
		</div>
		<div class="row">
			<div id="col1" class="col-md-5 col-md-offset-1">
			</div>
			<div id="col2" class="col-md-5">
			</div>
		</div>
	</div>
</body>
</html>